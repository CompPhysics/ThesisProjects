When deriving the flow equations for IM-SRG, both the generator $\hat{\eta}$ and the final flow require the evaluation of commutators between operators. These operators are given in normal-ordered form, such that Wick's generalized theorem can be applied, see section \ref{sec:SecQuant}.\\
As an example, we remind of the expression for Wegner's canonical generator, $\hat{\eta} = \left[ \Hd, \hat{H} \right]$, which suggests computing
\[
\hat {\eta} = \left[
 \sum\limits_{pq}f_{pq}^d \llb a_p\da a_q\rrb + \frac{1}{4}\sum\limits_{pqrs}v_{pqrs}^d \llb a_p\da a_q\da a_s a_r \rrb,
  \sum\limits_{pq}f_{pq}\llb a_p\da a_q\rrb + \frac{1}{4}\sum\limits_{pqrs}v_{pqrs} \llb a_p\da a_q\da a_s a_r \rrb
\right],
\]
where the amplitudes of the diagonal Hamiltonian are defined as
\[
f_{pq}^d = f_{pq}\delta_{pq}, \qquad v_{pqrs}^d = v_{pqrs}\lb \delta_{pr}\delta_{qs} + \delta_{ps}\delta_{qr} \rb.
\]
For instance, for the first term, $\left[\sum\limits_{pq}f_{pq}^d \llb a_p\da a_q\rrb, \sum\limits_{pq}f_{pq}\llb a_p\da a_q\rrb\right]$, Wick's theorem yields the following contributions for the fully contracted part:
\begin{align*}
\left[ \sum_{pq} \lbrace \ad_p a_q \rbrace f_{pq}^d, \sum_{pq} \lbrace \ad_p a_q \rbrace f_{pq} \right] &= 
\left[ \sum_{pq} \lbrace \ad_p a_q \rbrace f_{pq}^d, \sum_{rs} \lbrace \ad_r a_s \rbrace f_{rs} \right] \\
&= \sum_{pqrs} f_{pq}^d f_{rs} \left[ \lbrace \ad_p a_q\rbrace,\lbrace \ad_r a_s \rbrace\right] \\
&= \sum_{pqrs} f_{pq}^d f_{rs} \lb \lbrace \ad_p a_q \rbrace\lbrace \ad_r a_s \rbrace - \lbrace \ad_r a_s \rbrace \lbrace \ad_p a_q \rbrace \rb \\
&= \sum_{pqrs} f_{pq}^d f_{rs}
 \lb  
\lbrace
\contraction[2ex]{}{\ad_p}{a_q \ad_r}{a_s}
\contraction{\ad_p}{a_q}{}{\ad_r} 
 \ad_p a_q \ad_r a_s\rbrace -
 \lbrace \contraction[2ex]{}{\ad_r}{a_s \ad_p}{a_q}
\contraction{\ad_r}{a_s}{}{\ad_p} 
 {\ad_r a_s \ad_p a_q}\rbrace
\rb + \text{\small non-relevant contractions} \\
&=\sum_{ia} \lb f_{ia}^d f_{ai} - f_{ai}^d f_{ia} \rb + \text{\small non-relevant contractions},
\end{align*}
where we collect all not fully contracted terms in ''non-relevant contractions''. As before, we use the notations that indices $\lbrace i,j,k,\dots\rbrace
$ denote hole states below the Fermi level, $\lbrace a,b,c,\dots\rbrace$ denote particle states above the Fermi level, and $\lbrace p,q,r,\dots\rbrace$ are used as general indices.\\
An analogous procedure can be applied for obtaining the one-body terms, two-body terms etc. In the following, we list all those basic commutation relations that are needed to derive the IM-SRG equations, up to third-order level.\\
 Orienting on the notation for our Hamiltonian, we denote the one-, two and three-body operators as
\begin{align}
\begin{split}
\hat{F} &= \sum_{pq} f_{pq} \lbrace \ad_p \ad_q \rbrace, \\
\hat{V} &= \frac{1}{(2!)^2} \sum_{pqrs} v_{pqrs} \lbrace \ad_p a_q a_s a_r \rbrace, \\
\hat{W} &= \frac{1}{(3!)^2}\sum_{pqrstu} w_{pqrstu} \lbrace \ad_p \ad_q \ad_r a_u a_t a_s \rbrace,
\end{split}
\end{align}
and we assume antisymmetrized elements:
\begin{align}
v_{pqrs} &=- v_{qprs} = -v_{pqsr} = v_{qpsr} \\
w_{pqrstu} &= -w_{qprstu} = -w_{rqpstu} = -w_{prqstu} \notag \\
&= -w_{pqrtsu} =- w_{pqruts} =- w_{pqrsut} \notag \\
&= w_{qprtsu} = w_{rqptsu} = w_{prqtsu} \notag \\
&= w_{qpruts} = w_{rqputs} = w_{prquts} \notag \\
&= w_{qprsut} = w_{rqpsut} = w_{prqsut}. 
\end{align}
With the permutation operators
\[
P_{pq}f(p,q) = f(q,p), \quad P(pq/r) = 1-P_{pq}-P_{qr}, \quad P(p/qr) = 1-P_{pq}-P_{pr},
\]
the fully contracted terms are
\begin{align}
[\hat{F}^A,\hat{F}^B]^{(0)} &= \sum_{ia}\lb (1-P_{ia}) f_{ia}^A f_{ai}^B  \rb \\
[\hat{V}^A,\hat{V}^B]^{(0)} &= \frac{1}{4} \sum_{ijab} \lb v^A_{ijab}v^B_{abij} - v^B_{ijab} v^A_{abij} \rb \\
[\hat{W}^A,\hat{W}^B]^{(0)} &= \frac{1}{36} \sum_{ijkabc} \lb w^A_{ijkabc} w^B_{abcijk} - w^A_{abdijk} w^B_{ijkabc} \rb ,
\end{align}
the one-body terms are
\begin{align}
[\hat{F}^A,\hat{F}^B]^{(1)} &= \sum_{pq} \lbrace \ad_p a_q \rbrace  \sum_r \lb f^A_{pr}f^B_{rq} - f^B_{pr} f^A_{rq}\rb \\
%-------------------------------------------------
[\hat{F},\hat{V}]^{(1)} &= \sum_{pq} \lbrace \ad_p a_q \rbrace  \sum_{ia} \lb 1-P_{ia}\rb f_{ia} v_{apiq} \\
%---------------------------------------
[\hat{V}^A,\hat{V}^B]^{(1)} &= \sum_{pq} \lbrace \ad_p a_q \rbrace \left\lbrace \frac{1}{2} \sum_{abi} \lb v^A_{ipab}v^B_{abiq} - v^B_{ipab} v^A_{abiq} \rb \right. \notag \\
&\qquad \left. + \frac{1}{2} \sum_{ija} \lb v^A_{apij}v^B_{ijaq} - v^B_{apij} v^A_{ijaq} \rb \right\rbrace\\
%----------------------------------------------
[\hat{V},\hat{W}]^{(1)} &= \sum_{pq} \lbrace \ad_p a_q\rbrace \left\lbrace\frac{1}{4}  \sum_{abij} \lb v_{ijab}w_{abpqij} - v_{abij}w_{ijpqab} \rb \right\rbrace\\
%-------------------------------------------------------
[\hat{W}^A,\hat{W}^B]^{(1)} &= \sum_{pq} \lbrace \ad_p a_q \rbrace \left\lbrace \frac{1}{12} \sum_{ijabc} \lb w^A_{ijpabc} w^B_{abcijq} - w^B_{ijpabc} w^A_{abcijq} \rb \notag \right.\\
&\left.\qquad + \frac{1}{12} \sum_{abijk} \lb w^A_{abpijk} w^B_{ijkabq} - w^B_{abpijk} w^A_{ijkabq} \rb\right\rbrace, 
\end{align}
the two-body terms are
\begin{align}
[\hat{F},\hat{V}]^{(2)} &= \frac{1}{4}\sum_{pqrs}\lbrace \ad_p\ad_q a_s a_r \rbrace \sum_t \lb (1-P_{pq}) f_{pt} v_{tqrs} - (1-P_{rs})f_{tr} v_{pqts}\rb \\
%----------------------------------------------
[ \hat{F},\hat{W}]^{(2)} &= \sum_{pqrs}\lbrace \ad_p \ad_q a_s a_r \rbrace \sum_{ia} (1-P_{ia}) f_{ia} w_{apqirs} \\
%---------------------------------------------------------------
[\hat{V}^A, \hat{V}^B ]^{(2)} &= \frac{1}{4}\sum_{pqrs}\lbrace \ad_p\ad_q a_s a_r \rbrace  \left\lbrace
\frac{1}{2} \sum_{ab} \lb v^A_{pqab} v^B_{abrs} - v^B_{pqab} v^A_{abrs} \rb \right.\notag\\
& \qquad-  \sum_{ij} \lb v^A_{pqij} v^B_{ijrs} - v^B_{pqij} v^A_{ijrs} \rb 
 \notag \\
&\qquad + \left. \sum_{ia} (1-\hat{P}_{ia})(1-\hat{P}_{pq}-\hat{P}_{rs}+\hat{P}_{pq}\hat{P}_{rs}) v^A_{ipar} v^B_{aqis}  \right\rbrace\\
[ \hat{V},\hat{W}]^{(2)} &= \frac{1}{4}\sum_{pqrs}\lbrace \ad_p\ad_q a_s a_r \rbrace  \left\lbrace\frac{1}{2} \sum_{iab}(1-\hat{P}_{pq}\hat{P}_{pr}\hat{P}_{qs} - \hat{P}_{rs} + \hat{P}_{pr}\hat{P}_{qs}) v_{abri}w_{ipqabs}\right. \notag \\
&\left.\qquad + \frac{1}{2} \sum_{aij}(1-\hat{P}_{pq}\hat{P}_{pr}\hat{P}_{qs} - \hat{P}_{rs} + \hat{P}_{pr}\hat{P}_{qs}) v_{ijra}w_{apqijs}\right\rbrace
\end{align}
\begin{align}
%---------------------------------------------------------
[\hat{W}^A, \hat{W}^B ]^{(2)} &= \frac{1}{4}\sum_{pqrs}\lbrace \ad_p\ad_q a_s a_r \rbrace \left\lbrace\frac{1}{6} \sum_{iabc}\lb w^A_{ipqabc} w^B_{abcirs} -  w^B_{ipqabc} w^A_{abcirs}\rb \right.\notag \\
& \qquad - \frac{1}{6} \sum_{aijk}\lb w^A_{apqijk} w^B_{ijkars} -  w^B_{apqijk} w^A_{ijkars}\rb \notag \\
&\qquad + \left.\frac{1}{4} \sum_{abij} (1-\hat{P}_{pq})(1-\hat{P}_{rs}) \lb w^A_{abpijs} w^B_{ijqabr} - w^A_{ijpabs} w^B_{abqijr} \rb \right\rbrace
\end{align}
and the three-body terms are
\begin{align}
[\hat{F},\hat{W}]^{(3)} &= \frac{1}{36} \sum_{pqrstu} \lbrace \ad_p\ad_q\ad_r a_u a_t a_s \rbrace\left\lbrace \sum_t (1-\hat{P}_{pq}-\hat{P}_{pr}) f_{pt} w_{tqrstu} \right.\notag \\
&\left.\qquad - \sum_t (1-\hat{P}_{st}-\hat{P}_{su}) f_{ts} w_{tpqrtu} \right\rbrace \\
%-------------------------------------------------------------------------------------
[\hat{V}^A,\hat{V}^B]^{(3)} &= \frac{1}{36} \sum_{pqrstu} \lbrace \ad_p\ad_q\ad_r a_u a_t a_s \rbrace 
 \hat{P}(pq/r) \hat{P}(s/tu) \sum_v (v^A_{pqsv}v^B_{vrtu} - v^B_{pqsv}v^A_{vrtu} )\\
%---------------------------------------------------------------------------------
[\hat{V},\hat{W}]^{(3)} &= \frac{1}{36} \sum_{pqrstu} \lbrace \ad_p\ad_q\ad_r a_u a_t a_s \rbrace \\
&\qquad\left\lbrace \sum_{ab} \lb \hat{P}(pq/r)v_{pqab}w_{abrstu} - \hat{P}(s/tu) v_{abtu}w_{pqrsab} \rb \right.\notag \\
& \qquad -\sum_{ij} \lb \hat{P}(pq/r)v_{pqij}w_{ijrstu} - \hat{P}(s/tu) v_{ijtu}w_{pqrsij} \rb\\
&\qquad - \left. \sum_{ia}\lb 1-\hat{P}_{ia})\rb v_{apis}w_{iqratu}
\right\rbrace\\
%----------------------------------------------------------------------------------
[\hat{W}^A,\hat{W}^B]^{(3)} &=  \frac{1}{36} \sum_{pqrstu} \lbrace \ad_p\ad_q\ad_r a_u a_t a_s \rbrace \notag \\
&\qquad  \left\lbrace \frac{1}{6} \sum_{ijk}\lb w^A_{pqrijk} w^B_{ijkstu}- w^B_{pqrijk} w^A_{ijkstu} \rb \right.\notag \\
&\qquad + \frac{1}{6} \sum_{abc}\lb w^A_{pqrabc} w^B_{abcstu}- w^B_{pqrabc} w^A_{abcstu} \rb\notag\\
&\qquad+ \frac{1}{2} \sum_{ija} \hat{P}(pq/r)\hat{P}(s/tu)\lb w^A_{ijratu} w^B_{apqijs} - w^A_{aqriju}w^B_{pijsta}\rb\notag\\
&\qquad  \left.+ \frac{1}{2} \sum_{abi} \hat{P}(pq/r)\hat{P}(s/tu)\lb w^A_{abritu} w^B_{ipqabs} - w^A_{iqrabu}w^B_{pabsti}\rb \right\rbrace.
\end{align}


